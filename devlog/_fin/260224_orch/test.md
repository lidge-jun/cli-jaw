# Phase 4: 수동 테스트 체크리스트

> **대상**: Phase 1-3에서 추가/변경된 기능
> **전제**: `node server.js` 실행 후 `http://localhost:3457` 접속

---

## 🔴 핵심 테스트 (반드시)

### T-1: 기본 에이전트 자동 생성

1. DB를 비우거나 새 환경에서 서버 시작
2. **확인**: 콘솔에 `Agents: seeded 5 default employees` 출력
3. **확인**: 웹 UI 사이드바에 5명 (프런트/백엔드/데이터/문서/검수) 표시
4. **확인**: 모든 에이전트의 CLI가 `settings.cli`와 동일

### T-2: "이어서 해줘" 라우팅

1. 오케스트레이션 실행 → 완료 또는 max round 도달
2. 채팅창에 "이어서 해줘" 입력
3. **확인**: `orchestrateContinue()`가 호출됨 (서버 로그에서 worklog 읽기 발생)
4. **확인**: worklog 없을 때 "이어갈 worklog가 없습니다" 메시지 표시
5. **추가**: "계속해줘", "continue" 입력도 동일 동작

### T-3: 오케스트레이션 전체 흐름

1. 5명 에이전트가 있는 상태에서 작업 요청 (예: "버튼 색상 변경해줘")
2. **확인**: 기획 → subtask 분배 → 라운드 실행 → 리뷰 → phase advance 흐름
3. **확인**: 채팅창에 `🔄 라운드 N` + `➡️/🏁` 메시지 표시
4. **확인**: 에이전트 카드에 **phase badge** 컬러 표시 (파란→보라→초록→노랑→핑크)

### T-4: Employee Reset

1. `POST /api/employees/reset` (curl 또는 브라우저 콘솔에서):
   ```bash
   curl -X POST http://localhost:3457/api/employees/reset
   ```
2. **확인**: 기존 에이전트 전체 삭제 후 5명 기본 재생성
3. **확인**: 사이드바 자동 갱신 (WebSocket `agent_updated` 이벤트)

---

## 🟡 보조 테스트

### T-5: Worklog 생성/읽기

1. 오케스트레이션 실행
2. **확인**: `~/.cli-claw/worklogs/` 에 새 `.md` 파일 생성
3. **확인**: Agent Status Matrix 테이블이 worklog에 포함
4. **확인**: Execution Log에 라운드별 결과 기록

### T-6: WS 이벤트 표시

1. 오케스트레이션 실행 중 채팅창 관찰
2. **확인**: `📋 Worklog: ...` 메시지 (worklog_created)
3. **확인**: `🔄 라운드 N — M개 작업 [이름들]` (round_start)
4. **확인**: `➡️ 라운드 N → 다음 라운드` 또는 `🏁 완료` (round_done)

### T-7: 레거시 역할 매핑

1. 기존 에이전트의 역할이 "테스트 작성, 버그 재현, 품질 관리" 등인 경우
2. **확인**: 사이드바 Role 드롭다운에서 `custom`으로 올바르게 표시 (QA)
3. **확인**: "API 서버, DB 스키마, 비즈니스 로직 구현" → backend 매칭

### T-8: Phase Badge 실시간 갱신

1. 오케스트레이션 실행
2. **확인**: 에이전트 카드의 status 옆에 Phase pill 등장 (예: `P1` 파란색)
3. **확인**: Phase 진행 시 badge 색상/번호가 변경됨
4. **확인**: 오케스트레이션 완료 후 badge 사라짐 또는 유지

---

## ⚪ 엣지 케이스

### T-9: 0명 에이전트 + 메시지

1. 에이전트 전부 삭제 (UI에서)
2. 메시지 전송
3. **확인**: 단일 에이전트 모드로 정상 동작 (orchestrate 폴백)

### T-10: 동시 요청

1. 에이전트 실행 중 추가 메시지 전송
2. **확인**: 큐에 들어감 (`queued: true` 응답)
3. **확인**: 큐 badge 업데이트

### T-11: "이어서" + worklog 없음

1. worklogs 디렉토리 비우기
2. "이어서 해줘" 입력
3. **확인**: "이어갈 worklog가 없습니다" 메시지 (크래시 없음)

---

## 테스트 결과 기록

| 테스트 | 결과 | 비고 |
| ------ | ---- | ---- |
| T-1    | [ ]  |      |
| T-2    | [ ]  |      |
| T-3    | [ ]  |      |
| T-4    | [ ]  |      |
| T-5    | [ ]  |      |
| T-6    | [ ]  |      |
| T-7    | [ ]  |      |
| T-8    | [ ]  |      |
| T-9    | [ ]  |      |
| T-10   | [ ]  |      |
| T-11   | [ ]  |      |
