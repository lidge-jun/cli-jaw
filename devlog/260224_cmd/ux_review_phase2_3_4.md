# Phase 2/3/4 UIÂ·UX í”„ë¡ íŠ¸ì—”ë“œ ê²€í† 

> ê²€í†  ë‚ ì§œ: 2026-02-24
> ë²”ìœ„: `phase2_server_telegram.md`, `phase3_web_dropdown.md`, `phase4_cli_autocomplete_advanced.md`

---

## Phase 2: Server API + Telegram

### âœ… ì˜ëœ ì 
- **ì„œë²„ APIê°€ UI ë¡œì§ì„ í¬í•¨í•˜ì§€ ì•ŠìŒ** â€” ctx ê³„ì•½ì´ ê¹”ë”í•˜ê³  í”„ë¡ íŠ¸ì—”ë“œ ë…ë¦½ì 
- `GET /api/commands?interface=web` â€” ì¸í„°í˜ì´ìŠ¤ë³„ í•„í„°ë§ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì»¤ë§¨ë“œ ë…¸ì¶œ ë°©ì§€

### âš ï¸ UI/UX ì´ìŠˆ

| #   | ì´ìŠˆ                                                               | ì˜í–¥                                                                           | ì œì•ˆ                                                                                        |
| --- | ------------------------------------------------------------------ | ------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------- |
| U1  | `/api/command` ì‘ë‹µì— **í”¼ë“œë°± ìœ í˜• êµ¬ë¶„**ì´ ì—†ìŒ                  | Web UIê°€ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ ë˜‘ê°™ì´ `addSystemMsg()`ë¡œ í‘œì‹œ. ì‚¬ìš©ìê°€ ê²°ê³¼ë¥¼ êµ¬ë¶„ ëª»í•¨ | ì‘ë‹µì— `type: 'success'                                                                     | 'error' | 'info'` í•„ë“œ ì¶”ê°€. UIì—ì„œ ìƒ‰ìƒ ë¶„ê¸° |
| U2  | Telegram `/model` ì‹¤í–‰ ì‹œ **ì„±ê³µ ë©”ì‹œì§€ê°€ ë‚˜ì˜¤ì§€ë§Œ ì‹¤ì œë¡  ë¯¸ë°˜ì˜** | read-only ctxì—ì„œ `updateSettings` ë¬´ì‹œ. ì‚¬ìš©ì í˜¼ë™                           | `interfaces` í•„ë“œì—ì„œ TGìš© `/model`, `/cli` ì œì™¸í•˜ê±°ë‚˜, í•¸ë“¤ëŸ¬ê°€ ë°˜í™˜ê°’ ê²€ì¦                |
| U3  | `setMyCommands` ë“±ë¡ ì‹œ **ì¹´í…Œê³ ë¦¬/ê·¸ë£¹í•‘ ì—†ìŒ**                   | TG ì»¤ë§¨ë“œ ë©”ë‰´ê°€ ê¸¸ì–´ì§€ë©´ ì°¾ê¸° ì–´ë ¤ì›€                                          | BotFather APIëŠ” ê·¸ë£¹í•‘ ë¯¸ì§€ì›ì´ì§€ë§Œ, descriptionì— `[ì„¤ì •]`, `[ì¡°íšŒ]` ê°™ì€ prefix ì¶”ê°€ ê°€ëŠ¥ |
| U4  | TG ì»¤ë§¨ë“œ ê²°ê³¼ **í…ìŠ¤íŠ¸ë§Œ ì „ì†¡** (`ctx.reply(text)`)               | ë§ˆí¬ë‹¤ìš´ í¬ë§¤íŒ…, ë²„íŠ¼ ë“± ë¯¸ì‚¬ìš©. ì •ë³´ ë°€ë„ ë‚®ìŒ                                | Phase 2ì—ì„  OK, Phase 4+ì—ì„œ InlineKeyboardë‚˜ parse_mode ë„ì… ê²€í†                           |

---

## Phase 3: Web UI Command Dropdown

### âœ… ì˜ëœ ì 
- ARIA Combobox íŒ¨í„´ ì¤€ìˆ˜ (role, aria-expanded, aria-activedescendant)
- í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ + ë§ˆìš°ìŠ¤ í´ë¦­ + ì™¸ë¶€ í´ë¦­ ë‹«ê¸° ëª¨ë‘ ì»¤ë²„
- CSSì— `border-left: 3px solid accent` ì„ íƒ í‘œì‹œì â€” ì ‘ê·¼ì„± ì¢‹ìŒ (ìƒ‰ë§¹ ëŒ€ì‘)
- `JetBrains Mono` ì»¤ë§¨ë“œëª… â€” monospaceë¡œ ì •ë ¬ ê¹”ë”

### âš ï¸ UI/UX ì´ìŠˆ

| #   | ì´ìŠˆ                                                          | ì˜í–¥                                                             | ì œì•ˆ                                                            |
| --- | ------------------------------------------------------------- | ---------------------------------------------------------------- | --------------------------------------------------------------- |
| W1  | **ë“œë¡­ë‹¤ìš´ ìµœëŒ€ ë†’ì´ ë¯¸ì§€ì •**                                 | ì»¤ë§¨ë“œ 20ê°œ ë˜ë©´ ì „ì²´ ì±„íŒ… ì˜ì—­ì„ ë®ìŒ                           | `max-height: 240px` + `overflow-y: auto` (6~8ê°œ ë³´ì´ê²Œ)         |
| W2  | **ì…ë ¥ ì¤‘ debounce ì—†ìŒ**                                     | `update()` ë§¤ keypress í˜¸ì¶œ â†’ ë¹ ë¥¸ íƒ€ì´í•‘ ì‹œ ë¶ˆí•„ìš”í•œ DOM ì¬ë Œë” | `requestAnimationFrame` ë˜ëŠ” 16ms debounce ë˜í•‘                 |
| W3  | **ë“œë¡­ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜ ì—†ìŒ**                                  | ê°‘ìê¸° ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ â†’ ì–´ìƒ‰í•œ UX                               | `opacity 0â†’1` + `translateY(4pxâ†’0)` íŠ¸ëœì§€ì…˜ (150ms ease-out)   |
| W4  | **ëª¨ë°”ì¼ í„°ì¹˜ ë¯¸ê³ ë ¤**                                        | ë“œë¡­ë‹¤ìš´ì´ í‚¤ë³´ë“œ ìœ„ì— ê°€ë ¤ì§ˆ ìˆ˜ ìˆìŒ                            | `position: fixed` ë˜ëŠ” `visualViewport` APIë¡œ ê°€ì‹œ ì˜ì—­ ê³„ì‚°    |
| W5  | **`cmd-execute` ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸**ê°€ íë¦„ì„ ì´í•´í•˜ê¸° ì–´ë µê²Œ ë§Œë“¦ | ë””ë²„ê¹… ì‹œ ì´ë²¤íŠ¸ ì¶”ì ì´ ë³µì¡                                     | `applySelection`ì—ì„œ ì§ì ‘ `sendMessage()` import í˜¸ì¶œì´ ë” ëª…í™• |
| W6  | **ë¹ˆ ê²°ê³¼ ìƒíƒœ UI ì—†ìŒ**                                      | `/xyz` ê°™ì€ ë¯¸ë§¤ì¹­ ì…ë ¥ì— ë¹ˆ ë“œë¡­ë‹¤ìš´ í‘œì‹œ                       | `close()` ëŒ€ì‹  "ì¼ì¹˜í•˜ëŠ” ì»¤ë§¨ë“œê°€ ì—†ìŠµë‹ˆë‹¤" dim í…ìŠ¤íŠ¸ í‘œì‹œ     |
| W7  | **ì„ íƒ í•­ëª© ìŠ¤í¬ë¡¤ ì¶”ì  ì—†ìŒ**                                | ê¸´ ëª©ë¡ì—ì„œ â†“ ì—°íƒ€ ì‹œ ì„ íƒì´ ë³´ì´ëŠ” ì˜ì—­ ë°–ìœ¼ë¡œ ë‚˜ê°             | `scrollIntoView({ block: 'nearest' })` ì¶”ê°€                     |
| W8  | **í˜„ì¬ CLI/ì¸í„°í˜ì´ìŠ¤ì— ë”°ë¥¸ ì»¤ë§¨ë“œ ì„¤ëª… ì°¨ì´ ë¯¸í‘œì‹œ**        | Web ì „ìš© ë™ì‘ê³¼ CLI ë™ì‘ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ                          | `cmd.webDesc` ë˜ëŠ” `cmd.desc` + `(ì›¹ í•œì •)` ì ‘ë¯¸ì‚¬              |

### CSS ê°œì„  ì œì•ˆ

```css
/* W1: ë†’ì´ ì œí•œ */
.cmd-dropdown {
    max-height: 280px;
    overflow-y: auto;
}

/* W3: ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜ */
.cmd-dropdown {
    opacity: 0;
    transform: translateY(4px);
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
    pointer-events: none;
}
.cmd-dropdown.visible {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
}

/* W7: ì„ íƒ í•­ëª© ê°•ì¡° ë³´ê°• */
.cmd-item.selected {
    scroll-margin-block: 4px;
}
```

---

## Phase 4: CLI Advanced Autocomplete

### âœ… ì˜ëœ ì 
- `getArgumentCompletions` async provider â€” í™•ì¥ì„± ì¢‹ìŒ
- ì ìˆ˜ ê¸°ë°˜ ì •ë ¬ (exact â†’ startsWith â†’ includes â†’ íˆìŠ¤í† ë¦¬ ë³´ì •)
- Enter/Tab ì •ì±… ëª…í™•íˆ ë¶„ë¦¬ë¨

### âš ï¸ UI/UX ì´ìŠˆ

| #   | ì´ìŠˆ                                        | ì˜í–¥                                                                                                   | ì œì•ˆ                                                                    |
| --- | ------------------------------------------- | ------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------- |
| A1  | **argument stage ì „í™˜ ì‹œ ì‹œê° í”¼ë“œë°± ì—†ìŒ** | `/model ` ì…ë ¥ í›„ popupì´ ì»¤ë§¨ë“œ ëª©ë¡ â†’ ëª¨ë¸ ëª©ë¡ìœ¼ë¡œ ë°”ë€ŒëŠ”ë°, ì‚¬ìš©ìê°€ ìƒíƒœ ì „í™˜ì„ ì¸ì§€ ëª»í•  ìˆ˜ ìˆìŒ | popup ìƒë‹¨ì— í•œ ì¤„ context í‘œì‹œ: `model â–¸ ëª¨ë¸ ì„ íƒ` dim í…ìŠ¤íŠ¸         |
| A2  | **PageUp/PageDown í‚¤ ì‹œí€€ìŠ¤ ë¯¸ëª…ì‹œ**        | í„°ë¯¸ë„ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ (CSI 5~ / 6~)                                                                  | ESC ì‹œí€€ìŠ¤ í‘œ ì¶”ê°€: `\x1b[5~` (PgUp), `\x1b[6~` (PgDn)                  |
| A3  | **async provider ë¡œë”© ì¤‘ ìƒíƒœ ì—†ìŒ**        | ì„œë²„ì—ì„œ ëª¨ë¸ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” ë™ì•ˆ popupì´ ë¹„ê±°ë‚˜ ì´ì „ ëª©ë¡ì´ ë‚¨ìŒ                                     | "ë¡œë”© ì¤‘..." í•œ ì¤„ í‘œì‹œ ë˜ëŠ” shimmer íš¨ê³¼ (í„°ë¯¸ë„ì´ë‹ˆê¹Œ `â ‹â ™â ¹â€¦` spinner) |
| A4  | **`Right Arrow` ë³µì¡**                      | ì¼ë°˜ ì…ë ¥ ì¤‘ RightëŠ” ì»¤ì„œ ì´ë™ì¸ë°, popupì—ì„œë§Œ ì¹˜í™˜ â†’ í˜¼ë™                                            | Right Arrow ì¹˜í™˜ì€ ì œê±°í•˜ê³  Tabì— í†µì¼ ê¶Œì¥                             |
| A5  | **`Ctrl+N/Ctrl+P`ëŠ” í„°ë¯¸ë„ ì¶©ëŒ ê°€ëŠ¥**      | macOS Terminalì—ì„œ Ctrl+N = ìƒˆ ì°½, iTermì—ì„œëŠ” íŒ¨ìŠ¤ìŠ¤ë£¨                                                | iTerm ì™¸ì—” Ctrl+N/P ë¯¸ì§€ì›ìœ¼ë¡œ ë¬¸ì„œí™”. ê³µì‹ ë°”ì¸ë”©ì€ â†‘/â†“ë§Œ              |
| A6  | **Phase 1cì˜ `ensureSpaceBelow`ì™€ì˜ í˜¸í™˜**  | Phase 4 pagingì´ `visibleRows`ë¥¼ ë™ì  ë³€ê²½í•˜ë©´ `ensureSpaceBelow` ì¬í˜¸ì¶œ í•„ìš”                          | `visibleRows` ë³€ê²½ ì‹œ í•­ìƒ `ensureSpaceBelow(newVisibleRows)` ì„ í–‰      |

---

## ì¸í„°í˜ì´ìŠ¤ ê°„ UX ì¼ê´€ì„± ë§¤íŠ¸ë¦­ìŠ¤

| ë™ì‘          | CLI (1+4)            | Web (3)                 | Telegram (2)     | ì¼ê´€?      |
| ------------- | -------------------- | ----------------------- | ---------------- | ---------- |
| `/` ì…ë ¥      | ì¦‰ì‹œ popup           | ì¦‰ì‹œ dropdown           | TG ë„¤ì´í‹°ë¸Œ ë©”ë‰´ | âœ…          |
| í•„í„°ë§        | íƒ€ì´í•‘ ì‹¤ì‹œê°„        | íƒ€ì´í•‘ ì‹¤ì‹œê°„           | ë¯¸ì§€ì› (TG í•œê³„) | âš ï¸ ì˜ˆìƒ     |
| ì„ íƒ          | â†‘â†“ + Tab/Enter       | â†‘â†“ + Tab/Enter + ë§ˆìš°ìŠ¤ | íƒ­í•´ì„œ ì„ íƒ      | âœ…          |
| ë‹«ê¸°          | ESC/Backspace        | ESC/ì™¸ë¶€í´ë¦­            | ìë™             | âœ…          |
| ì¸ì ì…ë ¥     | popup ì „í™˜ (Phase 4) | **ë¯¸ê³„íš**              | ë¯¸ì§€ì›           | âŒ W/A í•„ìš” |
| ë¹ˆ ê²°ê³¼       | popup ë‹«í˜           | popup ë‹«í˜(W6)          | í•´ë‹¹ ì—†ìŒ        | âœ…          |
| `/clear` ê²°ê³¼ | í™”ë©´ clear           | ì±„íŒ…ì°½ innerHTML ë¹„ì›€   | clear ë©”ì‹œì§€     | âš ï¸ ë‹¤ë¦„ OK  |

> ğŸ“Œ **í•µì‹¬ ê°­**: Web UIì—ëŠ” Phase 4ì˜ **ì¸ì ìë™ì™„ì„±**ì´ ë°˜ì˜ ì•ˆ ë¨. Phase 3 êµ¬í˜„ ì‹œ argument stage í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•¨.

---

## ìš°ì„ ìˆœìœ„ ìš”ì•½

| ë“±ê¸‰     | ì´ìŠˆ                                                                   | Phase   |
| -------- | ---------------------------------------------------------------------- | ------- |
| ğŸ”´ Must   | W1 max-height, W7 scrollIntoView, U2 TG ë¦¬ë“œì˜¨ë¦¬ í˜¼ë™                  | 3, 2    |
| ğŸŸ  Should | W3 ì• ë‹ˆë©”ì´ì…˜, A1 stage í”¼ë“œë°±, U1 ì‘ë‹µ íƒ€ì…, A6 ensureSpaceBelow í˜¸í™˜ | 3, 4, 2 |
| ğŸŸ¡ Nice   | W2 debounce, W6 ë¹ˆê²°ê³¼ UI, A3 ë¡œë”© ìŠ¤í”¼ë„ˆ, A4 Right Arrow ì œê±°         | 3, 4    |
| ğŸŸ¢ Later  | W4 ëª¨ë°”ì¼, U4 TG InlineKeyboard, W8 ì¸í„°í˜ì´ìŠ¤ë³„ desc                  | 3, 2, 3 |
